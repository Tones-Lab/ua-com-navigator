# ------------------------------------------------------------------------------------------------------------- #
#
#
#
#  █████╗ ██╗   ██╗████████╗ ██████╗       ██████╗ ███████╗██████╗ ██╗      ██████╗ ██╗   ██╗███████╗██████╗ 
#  ██╔══██╗██║   ██║╚══██╔══╝██╔═══██╗      ██╔══██╗██╔════╝██╔══██╗██║     ██╔═══██╗╚██╗ ██╔╝██╔════╝██╔══██╗
#  ███████║██║   ██║   ██║   ██║   ██║█████╗██║  ██║█████╗  ██████╔╝██║     ██║   ██║ ╚████╔╝ █████╗  ██║  ██║
#  ██╔══██║██║   ██║   ██║   ██║   ██║╚════╝██║  ██║██╔══╝  ██╔═══╝ ██║     ██║   ██║  ╚██╔╝  ██╔══╝  ██║  ██║
#  ██║  ██║╚██████╔╝   ██║   ╚██████╔╝      ██████╔╝███████╗██║     ███████╗╚██████╔╝   ██║   ███████╗██████╔╝
#  ╚═╝  ╚═╝ ╚═════╝    ╚═╝    ╚═════╝       ╚═════╝ ╚══════╝╚═╝     ╚══════╝ ╚═════╝    ╚═╝   ╚══════╝╚═════╝ 
#  
#
#
#  Added by         D E P L O Y M E N T
#
#    Changes via the UI get's overwritten on the next deployment.
#
# ------------------------------------------------------------------------------------------------------------- #
##################################################################################################################
#       Info:           2019-12-02, Majewsky Mariella: Rearrange of Rules in Include-Rules-files
#       Desciption:     iMAPNorthboundHeartbeatNotificationType
#       OID:            1.3.6.1.4.1.2011.2.15.2.1.2.1.1.1.0.5
#       Name:           iMAPNorthboundHeartbeatNotificationType
#		Reference:		Netcool: Huawei_NCE_Campus_iMAPNorthboundHeartbeatNotificationType.rules
##################################################################################################################
my $rulesfile = "Huawei_NCE_Campus_iMAPNorthboundHeartbeatNotificationType.rules";
$Log->Message('DEBUG', "Executing: " . $rulesfile);
$Event->{SubMethod} = $rulesfile;

if ($specific == 5) {
    # iMAPNorthboundHeartbeatNotificationType
    # SNMPv2
    # The iMAP sends the heartbeat notification trap to the NMS
    # regularly each period. If the NMS receives the trap, the
    # connection between the NMS and the iMAP works. If not,
    # the connection fails
    my $iMAPNorthboundHeartbeatSystemLabel = $v1;
    my $iMAPNorthboundHeartbeatPeriod    = $v2;
    my $iMAPNorthboundHeartbeatTimeStamp = $v3;
    $Event->{'Node'}					 = $iMAPNorthboundHeartbeatSystemLabel;

    if ($ip eq "172.24.217.20") {
    	$Event->{'NodeAlias'} = "office-ncecampus-b52-01";
    } elsif ($ip eq "172.24.216.20") {
    	$Event->{'NodeAlias'} = "office-ncecampus-mgc-01";
    } else {
    	$Event->{'NodeAlias'} = $Event->{Node};
    }

    $Event->{'EventType'}				= "EMS Heartbeat";
    $Event->{'SubNode'}					= "Heartbeat";
    $Event->{'AlarmCategorization1'}	= "Huawei NCE Campus";
    $Event->{'AlarmCategorization2'}	= "Heartbeat";
    $Event->{'Summary'}       			= $Event->{'EMSName'} . " EMS Heartbeat";

    $Event->{'AlarmCode'} 				= "Heartbeat";
    LibUtil_AddSuppression($Event,"Hidden from NOC","Rules", 0,"Huawei_NCE_Campus iMAPNorthboundHeartbeatNotification suppressed", $rulesfile);  #@SuppressEscl = 20

    $Event->{'Severity'}      			= 2;
    $Event->{'EventCategory'} 			= 10; ## @Type=13 present in Netcool rules ## 
    $Event->{'SubDeviceType'} = 313;
}

$Log->Message('DEBUG', $rulesfile . " ...done");